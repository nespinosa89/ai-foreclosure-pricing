<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Solution Focused CRM – Pricing</title>

  <!-- PayPal SDK (LIVE) -->
  <script src="https://www.paypal.com/sdk/js?client-id=AQ3jhJnkmB0kt264uWo6JFeosGsbl2JfKV0giN1Ovejw50y0p6P3fDcPuip3MRFWVFx40TWTMXRyeRTM&vault=true&intent=subscription&components=buttons"></script>

  <style>
    :root{--bg:#0b0b10;--card:#111422;--line:#1b2033;--text:#e9ecf4;--muted:#9aa0b4}
    html,body{background:var(--bg);color:var(--text);margin:0}
    .container{max-width:980px;margin:56px auto;padding:0 20px}
    h1{font-size:32px;margin:0 0 8px}
    p.lead{color:var(--muted);margin:0 0 28px}
    .plans{display:grid;grid-template-columns:1fr;gap:20px}
    @media(min-width:860px){.plans{grid-template-columns:1fr 1fr}}
    .plan{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:24px;box-shadow:0 10px 24px rgba(0,0,0,.35)}
    .plan h2{margin:0 0 8px}
    .plan p{margin:0 0 18px;color:#b3b8c9}
    .hint{color:var(--muted);text-align:center;margin-top:36px;font-size:13px}
    .error{background:#311;border:1px solid #622;color:#f6dcdc;padding:10px 12px;border-radius:10px;margin:16px 0}
    .fallback a{display:inline-block;background:#ffc439;color:#111;padding:12px 16px;border-radius:8px;text-decoration:none;font-weight:600}
  </style>
</head>
<body>
  <div class="container">
    <h1>Solution Focused CRM</h1>
    <p class="lead">Your new CRM that updates DAILY with Probate Leads, Foreclosure leads, and all your marketing ALL IN ONE! Choose a plan to get started. After checkout, you'll receive a login link by email.</p>

    <div id="diag" class="error" style="display:none"></div>

    <div class="plans">
      <div class="plan">
        <h2>Basic — $299/mo</h2>
        <p>Perfect for one market (one county) and one lead source.</p>
        <div id="paypal-basic"></div>
        <div class="fallback" id="fb-basic" style="display:none">
          <a href="https://www.paypal.com/webapps/billing/subscriptions?plan_id=P-5GL88386S43964927NEGPOEY">Subscribe with PayPal</a>
        </div>
      </div>

      <div class="plan">
        <h2>Pro — $369/mo</h2>
        <p>Includes multiple lead sources and extended data coverage.</p>
        <div id="paypal-pro"></div>
        <div class="fallback" id="fb-pro" style="display:none">
          <a href="https://www.paypal.com/webapps/billing/subscriptions?plan_id=P-8EM98534PP476143YNEGPPGY">Subscribe with PayPal</a>
        </div>
      </div>
    </div>

    <p class="hint">Secure payments handled by PayPal Subscriptions</p>
  </div>

  <script>
    const BASIC_PLAN_ID = 'P-5GL88386S43964927NEGPOEY';
    const PRO_PLAN_ID   = 'P-8EM98534PP476143YNEGPPGY';
    const ONBOARD_URL   = 'https://solutionfocused-auth.nicole-f13.workers.dev/onboard';


    const diag = document.getElementById('diag');
    const showErr = (msg) => { diag.style.display='block'; diag.textContent = msg; };

    function renderButton(container, planId, planKey, fallbackId){
      try {
        if (!window.paypal || !window.paypal.Buttons) {
          document.getElementById(fallbackId).style.display = 'block';
          return;
        }
        window.paypal.Buttons({
          style:{ shape:'rect', color:'gold', layout:'vertical', label:'subscribe' },
          createSubscription: (_, actions) => actions.subscription.create({ plan_id: planId }),
          onApprove: (data) => {
            window.location.href = `${ONBOARD_URL}?subscription_id=${encodeURIComponent(data.subscriptionID)}&plan=${encodeURIComponent(planKey)}`;
          },
          onError: (err) => {
            document.getElementById(fallbackId).style.display = 'block';
            showErr('PayPal error: ' + (err?.message || err));
          }
        }).render(container);
      } catch(e){
        document.getElementById(fallbackId).style.display = 'block';
        showErr('Failed to render PayPal buttons. ' + e);
      }
    }

    renderButton('#paypal-basic', BASIC_PLAN_ID, 'basic', 'fb-basic');
    renderButton('#paypal-pro',   PRO_PLAN_ID,   'pro',   'fb-pro');
  </script>
</body>
</html>
